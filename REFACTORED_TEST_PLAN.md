# ãƒªãƒ•ã‚¡ã‚¯ã‚¿ã‚³ãƒ¼ãƒ‰å‘ã‘ãƒ†ã‚¹ãƒˆè¨ˆç”»

## æ¦‚è¦

èŒç¥æ‹¼éŸ³ãƒ•ã‚©ãƒ³ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ã‚³ãƒ¼ãƒ‰å‘ã‘ã®åŒ…æ‹¬çš„ãªãƒ†ã‚¹ãƒˆè¨ˆç”»ã§ã™ã€‚TDDï¼ˆãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºï¼‰åŸå‰‡ã«å¾“ã„ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–ã€å“è³ªå‘ä¸Šã€ä¿å®ˆæ€§ã®ç¢ºä¿ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚

## ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### 1. ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºï¼ˆTDDï¼‰åŸå‰‡

- **Red-Green-Refactor**ã‚µã‚¤ã‚¯ãƒ«ã‚’å³æ ¼ã«é©ç”¨
- ã™ã¹ã¦ã®æ–°æ©Ÿèƒ½ã¨ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã¯ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã§å®Ÿè£…
- æ—¢å­˜å‹•ä½œã®ç‰¹æ€§åŒ–ãƒ†ã‚¹ãƒˆã‚’å…ˆã«ä½œæˆã—ã¦ã‹ã‚‰æ”¹å–„

### 2. ãƒ†ã‚¹ãƒˆã‚«ãƒ†ã‚´ãƒªåˆ†é¡

- **Unit Testsï¼ˆå˜ä½“ãƒ†ã‚¹ãƒˆï¼‰**: å€‹åˆ¥ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å‹•ä½œæ¤œè¨¼
- **Integration Testsï¼ˆçµåˆãƒ†ã‚¹ãƒˆï¼‰**: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã®é€£æºæ¤œè¨¼
- **Security Testsï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆï¼‰**: è„†å¼±æ€§é˜²æ­¢æ¤œè¨¼
- **Performance Testsï¼ˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆï¼‰**: æ€§èƒ½å›å¸°é˜²æ­¢
- **Characterization Testsï¼ˆç‰¹æ€§åŒ–ãƒ†ã‚¹ãƒˆï¼‰**: æ—¢å­˜å‹•ä½œã®ä¿è­·

## ãƒ†ã‚¹ãƒˆå®Ÿè£…çŠ¶æ³

### âœ… å®Œäº†æ¸ˆã¿

#### 1. ãƒ†ã‚¹ãƒˆã‚¤ãƒ³ãƒ•ãƒ©

- **pytestè¨­å®š**: `pytest.ini`ã§å„ç¨®ãƒãƒ¼ã‚«ãƒ¼ã¨è¨­å®šã‚’å®šç¾©
- **ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£**: `tests/conftest.py`ã§å…±é€šãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’æä¾›
- **ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ**: æ©Ÿèƒ½åˆ¥ã«ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ•´ç†

#### 2. å˜ä½“ãƒ†ã‚¹ãƒˆï¼ˆUnit Testsï¼‰ - **220/220ãƒ†ã‚¹ãƒˆé€šé (100%)**

##### A. è¨­å®šã‚·ã‚¹ãƒ†ãƒ ï¼ˆConfig Systemï¼‰ - 100% å®Œäº†ï¼ˆ34/34ãƒ†ã‚¹ãƒˆï¼‰

- âœ… `test_font_config.py`: ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã®æ¤œè¨¼ï¼ˆ19ãƒ†ã‚¹ãƒˆï¼‰
- âœ… `test_constants.py`: å®šæ•°ã¨å€¤ã®æ¤œè¨¼ï¼ˆ15ãƒ†ã‚¹ãƒˆï¼‰

##### B. ãƒ‡ãƒ¼ã‚¿ç®¡ç†ï¼ˆData Managementï¼‰ - 100% å®Œäº†ï¼ˆ77/77ãƒ†ã‚¹ãƒˆï¼‰

- âœ… `test_pinyin_data.py`: æ‹¼éŸ³ãƒ‡ãƒ¼ã‚¿ç®¡ç†ï¼ˆ21ãƒ†ã‚¹ãƒˆï¼‰
- âœ… `test_character_data.py`: æ–‡å­—ãƒ‡ãƒ¼ã‚¿ç®¡ç†ï¼ˆ26ãƒ†ã‚¹ãƒˆï¼‰
- âœ… `test_mapping_data.py`: ãƒãƒƒãƒ”ãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿ç®¡ç†ï¼ˆ30ãƒ†ã‚¹ãƒˆï¼‰

##### C. ãƒ•ã‚©ãƒ³ãƒˆå‡¦ç†ï¼ˆFont Processingï¼‰ - 100% å®Œäº†ï¼ˆ16/16ãƒ†ã‚¹ãƒˆï¼‰

- âœ… `test_font_builder.py`: ãƒ•ã‚©ãƒ³ãƒˆæ§‹ç¯‰ï¼ˆ16ãƒ†ã‚¹ãƒˆï¼‰

##### D. ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼ˆUtilitiesï¼‰ - 100% å®Œäº†ï¼ˆ34/34ãƒ†ã‚¹ãƒˆï¼‰

- âœ… `test_cmap_utils.py`: CMapãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼ˆ34ãƒ†ã‚¹ãƒˆï¼‰

##### E. CLIãƒ»ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ - 100% å®Œäº†ï¼ˆ29/29ãƒ†ã‚¹ãƒˆï¼‰

- âœ… `test_main.py`: CLIãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆï¼ˆ29ãƒ†ã‚¹ãƒˆï¼‰

##### F. ã‚°ãƒªãƒ•å‡¦ç†ï¼ˆGlyph Processingï¼‰ - 100% å®Œäº†ï¼ˆ30/30ãƒ†ã‚¹ãƒˆï¼‰

- âœ… `test_pinyin_glyph.py`: æ‹¼éŸ³ã‚°ãƒªãƒ•ç”Ÿæˆï¼ˆ30ãƒ†ã‚¹ãƒˆï¼‰

```python
# å®Ÿè£…æ¸ˆã¿ãƒ†ã‚¹ãƒˆä¾‹
def test_pinyin_data_manager_loading():
    """æ‹¼éŸ³ãƒ‡ãƒ¼ã‚¿ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã®ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿"""
    manager = PinyinDataManager()
    assert manager.get_pinyin("ä¸­") == ["zhÅng", "zhÃ²ng"]

def test_font_builder_initialization():
    """FontBuilderã®åˆæœŸåŒ–ãƒ†ã‚¹ãƒˆ"""
    builder = FontBuilder(font_type=FontType.HAN_SERIF, ...)
    assert builder.font_type == FontType.HAN_SERIF
```

#### 3. ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸å®Ÿç¸¾

- **å®Ÿè£…æ¸ˆã¿ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«**: 6ã¤ã®ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- **ãƒ†ã‚¹ãƒˆæˆåŠŸç‡**: 100% (220/220ãƒ†ã‚¹ãƒˆé€šé)
- **TDDåŸå‰‡**: å…¨ãƒ†ã‚¹ãƒˆã§Red-Green-Refactorã‚µã‚¤ã‚¯ãƒ«é©ç”¨
- **ãƒ¢ãƒƒã‚¯ã¨ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãƒ†ã‚¹ãƒˆ**: åŒ…æ‹¬çš„ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æ¤œè¨¼

### ğŸ”„ å®Ÿè£…ä¸­

#### 1. çµåˆãƒ†ã‚¹ãƒˆï¼ˆIntegration Testsï¼‰

##### ãƒ•ã‚©ãƒ³ãƒˆç”Ÿæˆãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ - éª¨æ ¼å®Œäº†ã€å®Ÿè£…ç¶™ç¶šä¸­

- âœ… `test_complete_pipeline.py`: å®Œå…¨ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãƒ†ã‚¹ãƒˆéª¨æ ¼
- ğŸ”„ HAN_SERIFãƒ•ã‚©ãƒ³ãƒˆç”Ÿæˆãƒ†ã‚¹ãƒˆ
- ğŸ”„ HANDWRITTENãƒ•ã‚©ãƒ³ãƒˆç”Ÿæˆãƒ†ã‚¹ãƒˆ
- ğŸ”„ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆJSONä½œæˆãƒ†ã‚¹ãƒˆ
- ğŸ”„ ãƒ©ãƒ†ãƒ³ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆæŠ½å‡ºãƒ†ã‚¹ãƒˆ

#### 2. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆæ‹¡å¼µ

- ğŸ”„ ãƒ‘ã‚¹ãƒ»ãƒˆãƒ©ãƒãƒ¼ã‚µãƒ«é˜²æ­¢ã®æ”¹å–„
- ğŸ”„ ãƒ•ã‚¡ã‚¤ãƒ«æ¨©é™æ¤œè¨¼
- ğŸ”„ ç’°å¢ƒå¤‰æ•°ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³é˜²æ­¢

### ğŸ“‹ æœªå®Ÿè£…ï¼ˆå„ªå…ˆåº¦é †ï¼‰

#### 1. é«˜å„ªå…ˆåº¦ï¼ˆPhase 1ï¼‰ - refactored ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®æ®‹ã‚Šãƒ†ã‚¹ãƒˆ

##### A. CLIãƒ»ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ

```markdown
- [x] `test_main.py` - CLIãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆï¼ˆ29ãƒ†ã‚¹ãƒˆå®Œäº†ï¼‰âœ…
```

##### B. ã‚³ã‚¢æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ

```markdown
- [x] `test_pinyin_glyph.py` - æ‹¼éŸ³ã‚°ãƒªãƒ•ç”Ÿæˆï¼ˆ30ãƒ†ã‚¹ãƒˆå®Œäº†ï¼‰âœ…
- [ ] `test_gsub_table_generator.py` - GSUBãƒ†ãƒ¼ãƒ–ãƒ«ç”Ÿæˆï¼ˆã‚³ã‚¢æ©Ÿèƒ½ï¼‰
- [ ] `test_make_template_jsons.py` - ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆJSONç”Ÿæˆï¼ˆé‡è¦å‰å‡¦ç†ï¼‰
- [ ] `test_retrieve_latin_alphabet.py` - ãƒ©ãƒ†ãƒ³æ–‡å­—æŠ½å‡ºï¼ˆé‡è¦å‰å‡¦ç†ï¼‰
```

##### C. æ‹¼éŸ³å‡¦ç†ãƒ†ã‚¹ãƒˆ

```markdown
- [ ] `test_hanzi_pinyin.py` - æ¼¢å­—æ‹¼éŸ³å‡¦ç†ï¼ˆã‚³ã‚¢æ©Ÿèƒ½ï¼‰
- [ ] `test_pinyin_conversion.py` - æ‹¼éŸ³å¤‰æ›ï¼ˆã‚³ã‚¢æ©Ÿèƒ½ï¼‰
- [ ] `test_pinyin_utils.py` - æ‹¼éŸ³ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
```

##### D. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£é‡è¦ãƒ†ã‚¹ãƒˆ

```markdown
- [ ] `test_shell_utils.py` - ã‚·ã‚§ãƒ«å®Ÿè¡Œã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ï¼ˆæ‹¡å¼µï¼‰
```

##### B. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ†ã‚¹ãƒˆ

```python
# å®Ÿè£…äºˆå®šãƒ†ã‚¹ãƒˆä¾‹
def test_missing_font_file_handling():
    """ãƒ•ã‚©ãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ä¸å­˜åœ¨æ™‚ã®å‡¦ç†"""
    with pytest.raises(FileNotFoundError):
        FontBuilder(font_type=FontType.HAN_SERIF,
                   template_main_path="nonexistent.json")

def test_corrupted_json_handling():
    """ç ´æJSONãƒ•ã‚¡ã‚¤ãƒ«ã®å‡¦ç†"""
    with pytest.raises(json.JSONDecodeError):
        load_template_json("corrupted.json")
```

#### 2. ä¸­å„ªå…ˆåº¦ï¼ˆPhase 2ï¼‰ - æ®‹ã‚Šã®refactoredãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

##### A. ãƒ•ã‚©ãƒ³ãƒˆå‡¦ç†æ‹¡å¼µãƒ†ã‚¹ãƒˆ

```markdown
- [ ] `test_font_assembler.py` - ãƒ•ã‚©ãƒ³ãƒˆçµ„ã¿ç«‹ã¦
- [ ] `test_glyph_manager.py` - ã‚°ãƒªãƒ•ç®¡ç†
```

##### B. å‡¦ç†ç³»ãƒ†ã‚¹ãƒˆ

```markdown
- [ ] `test_optimized_utility.py` - æœ€é©åŒ–ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
- [ ] `test_parallel_processor.py` - ä¸¦åˆ—å‡¦ç†
- [ ] `test_cache_manager.py` - ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç®¡ç†
- [ ] `test_benchmark.py` - ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯æ©Ÿèƒ½
```

##### C. è¨­å®šãƒ†ã‚¹ãƒˆæ‹¡å¼µ

```markdown
- [ ] `test_paths.py` - ãƒ‘ã‚¹è¨­å®š
- [ ] `test_name_table.py` - åå‰ãƒ†ãƒ¼ãƒ–ãƒ«
- [ ] `test_font_name_tables.py` - ãƒ•ã‚©ãƒ³ãƒˆåå‰ãƒ†ãƒ¼ãƒ–ãƒ«
```

##### D. ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆæ‹¡å¼µ

```markdown
- [ ] `test_character_utils.py` - æ–‡å­—ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
- [ ] `test_dict_utils.py` - è¾æ›¸ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
```

#### 3. ä½å„ªå…ˆåº¦ï¼ˆPhase 3ï¼‰

##### A. å¤–éƒ¨ãƒ„ãƒ¼ãƒ«çµ±åˆãƒ†ã‚¹ãƒˆ

```python
# å®Ÿè£…äºˆå®šãƒ†ã‚¹ãƒˆä¾‹
@pytest.mark.requires_external_tools
def test_otfcc_integration():
    """otfccãƒ„ãƒ¼ãƒ«ã¨ã®çµ±åˆãƒ†ã‚¹ãƒˆ"""
    # å®Ÿéš›ã®otfccã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ãŸãƒ†ã‚¹ãƒˆ

@pytest.mark.requires_external_tools
def test_jq_integration():
    """jqãƒ„ãƒ¼ãƒ«ã¨ã®çµ±åˆãƒ†ã‚¹ãƒˆ"""
    # å®Ÿéš›ã®jqã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ãŸãƒ†ã‚¹ãƒˆ
```

##### B. å›½éš›åŒ–ãƒ»æ–‡å­—ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ†ã‚¹ãƒˆ

```python
# å®Ÿè£…äºˆå®šãƒ†ã‚¹ãƒˆä¾‹
def test_unicode_handling():
    """Unicodeæ–‡å­—å‡¦ç†ãƒ†ã‚¹ãƒˆ"""
    # ç°¡ä½“å­—ã€ç¹ä½“å­—ã€æ—¥æœ¬èªæ¼¢å­—ã®å‡¦ç†æ¤œè¨¼

def test_emoji_handling():
    """çµµæ–‡å­—å‡¦ç†ãƒ†ã‚¹ãƒˆ"""
    # çµµæ–‡å­—ã‚’å«ã‚€ãƒ†ã‚­ã‚¹ãƒˆã®å‡¦ç†æ¤œè¨¼
```

## ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```shell
tests/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ conftest.py                      # å…±é€šãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£
â”œâ”€â”€ pytest.ini                      # pytestè¨­å®š
â”œâ”€â”€ unit/                            # å˜ä½“ãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ test_font_config.py      âœ… (19ãƒ†ã‚¹ãƒˆ)
â”‚   â”‚   â”œâ”€â”€ test_constants.py        âœ… (15ãƒ†ã‚¹ãƒˆ)
â”‚   â”‚   â”œâ”€â”€ test_paths.py            ğŸ“‹
â”‚   â”‚   â”œâ”€â”€ test_name_table.py       ğŸ“‹
â”‚   â”‚   â””â”€â”€ test_font_name_tables.py ğŸ“‹
â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”œâ”€â”€ test_pinyin_data.py      âœ… (21ãƒ†ã‚¹ãƒˆ)
â”‚   â”‚   â”œâ”€â”€ test_character_data.py   âœ… (26ãƒ†ã‚¹ãƒˆ)
â”‚   â”‚   â””â”€â”€ test_mapping_data.py     âœ… (30ãƒ†ã‚¹ãƒˆ)
â”‚   â”œâ”€â”€ font/
â”‚   â”‚   â”œâ”€â”€ test_font_builder.py     âœ… (16ãƒ†ã‚¹ãƒˆ)
â”‚   â”‚   â”œâ”€â”€ test_font_assembler.py   ğŸ“‹
â”‚   â”‚   â””â”€â”€ test_glyph_manager.py    ğŸ“‹
â”‚   â”œâ”€â”€ glyph/
â”‚   â”‚   â””â”€â”€ test_pinyin_glyph.py     âœ… (30ãƒ†ã‚¹ãƒˆ)
â”‚   â”œâ”€â”€ processing/
â”‚   â”‚   â”œâ”€â”€ test_gsub_table_generator.py ğŸ“‹ (HIGH)
â”‚   â”‚   â”œâ”€â”€ test_optimized_utility.py   ğŸ“‹
â”‚   â”‚   â”œâ”€â”€ test_parallel_processor.py  ğŸ“‹
â”‚   â”‚   â”œâ”€â”€ test_cache_manager.py       ğŸ“‹
â”‚   â”‚   â””â”€â”€ test_benchmark.py           ğŸ“‹
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ test_cmap_utils.py       âœ… (34ãƒ†ã‚¹ãƒˆ)
â”‚   â”‚   â”œâ”€â”€ test_hanzi_pinyin.py     ğŸ“‹ (HIGH)
â”‚   â”‚   â”œâ”€â”€ test_pinyin_conversion.py ğŸ“‹ (HIGH)
â”‚   â”‚   â”œâ”€â”€ test_pinyin_utils.py     ğŸ“‹ (HIGH)
â”‚   â”‚   â”œâ”€â”€ test_shell_utils.py      ğŸ“‹ (HIGH)
â”‚   â”‚   â”œâ”€â”€ test_character_utils.py  ğŸ“‹
â”‚   â”‚   â””â”€â”€ test_dict_utils.py       ğŸ“‹
â”‚   â””â”€â”€ cli/
â”‚       â””â”€â”€ test_main.py             âœ… (29ãƒ†ã‚¹ãƒˆ)
â”œâ”€â”€ integration/
â”‚   â”œâ”€â”€ test_complete_pipeline.py    ğŸ”„
â”‚   â”œâ”€â”€ test_font_generation.py      ğŸ“‹
â”‚   â””â”€â”€ test_data_flow.py            ğŸ“‹
â”œâ”€â”€ security/
â”‚   â”œâ”€â”€ test_shell_security.py       ğŸ”„
â”‚   â”œâ”€â”€ test_path_validation.py      ğŸ”„
â”‚   â””â”€â”€ test_input_validation.py     ğŸ“‹
â”œâ”€â”€ performance/
â”‚   â”œâ”€â”€ test_font_generation_perf.py ğŸ“‹
â”‚   â”œâ”€â”€ test_memory_usage.py         ğŸ“‹
â”‚   â””â”€â”€ test_cpu_usage.py            ğŸ“‹
â””â”€â”€ characterization/
    â”œâ”€â”€ test_legacy_behavior.py      âœ…
    â”œâ”€â”€ test_current_behavior.py     ğŸ“‹
    â””â”€â”€ test_output_compatibility.py ğŸ“‹
```

## å“è³ªåŸºæº–

### 1. ã‚«ãƒãƒ¬ãƒƒã‚¸è¦ä»¶

- **å˜ä½“ãƒ†ã‚¹ãƒˆ**: 95%ä»¥ä¸Š
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£é–¢é€£**: 100%
- **çµ±åˆãƒ†ã‚¹ãƒˆ**: ä¸»è¦ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³80%ä»¥ä¸Š
- **å…¨ä½“**: 90%ä»¥ä¸Š

### 2. ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚é–“

- **å˜ä½“ãƒ†ã‚¹ãƒˆ**: 5ç§’ä»¥å†…
- **çµ±åˆãƒ†ã‚¹ãƒˆ**: 30ç§’ä»¥å†…
- **å®Œå…¨ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆ**: 2åˆ†ä»¥å†…

### 3. ä¿¡é ¼æ€§è¦ä»¶

- **ãƒ•ãƒ©ãƒƒã‚­ãƒ¼ãƒ†ã‚¹ãƒˆ**: 0%
- **ãƒ†ã‚¹ãƒˆæˆåŠŸç‡**: 99%ä»¥ä¸Š
- **CI/CDçµ±åˆ**: å®Œå…¨è‡ªå‹•åŒ–

## å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰

### åŸºæœ¬ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

```bash
# å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
python -m pytest tests/ -v

# ã‚«ãƒ†ã‚´ãƒªåˆ¥å®Ÿè¡Œ
python -m pytest tests/unit/ -v           # å˜ä½“ãƒ†ã‚¹ãƒˆ
python -m pytest tests/integration/ -v    # çµåˆãƒ†ã‚¹ãƒˆ
python -m pytest tests/security/ -v       # ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ

# ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ãå®Ÿè¡Œ
python -m pytest tests/ --cov=src --cov-report=html
```

### ç‰¹å®šç”¨é€”å®Ÿè¡Œ

```bash
# é«˜é€Ÿãƒ†ã‚¹ãƒˆï¼ˆå˜ä½“ãƒ†ã‚¹ãƒˆã®ã¿ï¼‰
python -m pytest tests/unit/ -x --tb=short

# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆã®ã¿
python -m pytest -m security -v

# ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆã®ã¿
python -m pytest -m benchmark --benchmark-only

# å¤–éƒ¨ãƒ„ãƒ¼ãƒ«å¿…è¦ãªãƒ†ã‚¹ãƒˆã‚’é™¤å¤–
python -m pytest -m "not requires_external_tools"
```

## CI/CDçµ±åˆ

### GitHub Actionsè¨­å®šä¾‹

```yaml
name: Test Suite
on: [push, pull_request]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Set up Python
      uses: actions/setup-python@v2
      with:
        python-version: 3.11
    - name: Install dependencies
      run: |
        pip install -r requirements.txt
        pip install pytest pytest-cov
    - name: Run tests
      run: |
        python -m pytest tests/unit/ tests/security/ -v --cov=src
    - name: Upload coverage
      uses: codecov/codecov-action@v1
```

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

### å³åº§ã«å®Ÿè£…ã™ã¹ããƒ†ã‚¹ãƒˆï¼ˆé«˜å„ªå…ˆåº¦Phase 1ï¼‰

1. âœ… **CLIãƒ¡ã‚¤ãƒ³ãƒ†ã‚¹ãƒˆ**ï¼ˆ`test_main.py`ï¼‰ - æœ€é‡è¦ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆï¼ˆå®Œäº†ï¼‰
2. **ã‚³ã‚¢æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ**ï¼š
   - âœ… `test_pinyin_glyph.py` - æ‹¼éŸ³ã‚°ãƒªãƒ•ç”Ÿæˆï¼ˆå®Œäº†ï¼‰
   - [ ] `test_gsub_table_generator.py` - GSUBãƒ†ãƒ¼ãƒ–ãƒ«ç”Ÿæˆ
3. **å‰å‡¦ç†ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ†ã‚¹ãƒˆ**ï¼š
   - [ ] `test_make_template_jsons.py` - ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆJSONç”Ÿæˆ
   - [ ] `test_retrieve_latin_alphabet.py` - ãƒ©ãƒ†ãƒ³æ–‡å­—æŠ½å‡º
4. **æ‹¼éŸ³å‡¦ç†ãƒ†ã‚¹ãƒˆ**ï¼š
   - [ ] `test_hanzi_pinyin.py` - æ¼¢å­—æ‹¼éŸ³å‡¦ç†
   - [ ] `test_pinyin_conversion.py` - æ‹¼éŸ³å¤‰æ›
5. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ**ï¼ˆ`test_shell_utils.py`ï¼‰ - ã‚·ã‚§ãƒ«å®Ÿè¡Œã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

### ç¶™ç¶šçš„æ”¹å–„é …ç›®

1. **ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸å‘ä¸Š**
2. **CI/CDçµ±åˆå¼·åŒ–**
3. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å›å¸°é˜²æ­¢**
4. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆæ‹¡å¼µ**

## æˆåŠŸåŸºæº–

### çŸ­æœŸç›®æ¨™ï¼ˆ1-2é€±é–“ï¼‰

- [x] åŸºæœ¬å˜ä½“ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸é”æˆï¼ˆ220/220ãƒ†ã‚¹ãƒˆé€šéï¼‰
- [x] CLIãƒ»ã‚³ã‚¢æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆéƒ¨åˆ†å®Œäº†ï¼ˆPhase 1é«˜å„ªå…ˆåº¦ã®40%å®Œäº†ï¼‰
- [ ] refactoredãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ä¸»è¦ãƒ†ã‚¹ãƒˆ90%å®Œäº†

### ä¸­æœŸç›®æ¨™ï¼ˆ1ãƒ¶æœˆï¼‰

- [ ] å…¨refactoredãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ†ã‚¹ãƒˆå®Œäº†ï¼ˆPhase 2ä¸­å„ªå…ˆåº¦ï¼‰
- [ ] çµåˆãƒ†ã‚¹ãƒˆå®Œäº†
- [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ100%å®Œäº†

### é•·æœŸç›®æ¨™ï¼ˆ2-3ãƒ¶æœˆï¼‰

- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆå®Ÿè£…
- [ ] å®Œå…¨è‡ªå‹•åŒ–ãƒ†ã‚¹ãƒˆãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
- [ ] å…¨ä½“ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸95%é”æˆ

---

*ã“ã®ãƒ†ã‚¹ãƒˆè¨ˆç”»ã¯ã€èŒç¥æ‹¼éŸ³ãƒ•ã‚©ãƒ³ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å“è³ªä¿è¨¼ã¨ç¶™ç¶šçš„æ”¹å–„ã‚’ç›®çš„ã¨ã—ã¦ä½œæˆã•ã‚Œã¾ã—ãŸã€‚TDDåŸå‰‡ã«åŸºã¥ãã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–ã¨ä¿å®ˆæ€§å‘ä¸Šã‚’é‡è¦–ã—ã¦ã„ã¾ã™ã€‚*
